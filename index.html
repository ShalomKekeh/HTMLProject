<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>757 Region Public Services Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font import - Inter is a highly readable, professional font often used in modern web design. */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            /* PROFESSIONAL REFORMAT: Changed background to white */
            background-color: #ffffff; /* Explicitly white */
            /* PROFESSIONAL REFORMAT: Changed primary text color to dark gray */
            color: #343a40; /* Dark gray for good contrast */
            line-height: 1.6; /* Improve readability of text blocks */
        }
        /* PROFESSIONAL REFORMAT: Removed gradient text styles. Government sites typically use solid, clear colors. */
        .bg-clip-text { /* This class is no longer used for text styling, but kept for consistency if needed elsewhere */
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Styles for dropdown content (accordion) */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            /* PROFESSIONAL REFORMAT: Add subtle top border for separation when opened */
            border-top: 1px solid #e9ecef; /* Lighter border for clean look */
            background-color: #fdfdfd; /* Slightly off-white background for content */
        }
        .accordion-content.active {
            max-height: 600px; /* Adjusted max-height to provide more space, can be tweaked */
            transition: max-height 0.6s ease-in-out; /* Smoother transition */
            overflow-y: auto; /* Enable vertical scrolling */
            padding-right: 1.5rem; /* More padding to separate content from scrollbar */
        }

        /* PROFESSIONAL REFORMAT: Custom scrollbar styling for Webkit browsers (Chrome, Safari, Edge) */
        .accordion-content::-webkit-scrollbar {
            width: 10px; /* Slightly wider scrollbar for easier interaction */
        }

        .accordion-content::-webkit-scrollbar-track {
            background: #e9ecef; /* Light track color */
            border-radius: 5px;
        }

        .accordion-content::-webkit-scrollbar-thumb {
            background-color: #adb5bd; /* Muted gray thumb */
            border-radius: 5px;
            border: 2px solid #e9ecef; /* Border around the thumb */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">

    <header class="w-full max-w-4xl bg-white shadow-md rounded-lg mb-6 py-4 px-6 text-center border-b-4 border-blue-700">
        <div class="flex items-center justify-center">
            <img src="https://via.placeholder.com/50x50/0056b3/ffffff?text=GOV" alt="Government Logo" class="mr-4 hidden sm:block">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800">757 Public Services Portal</h1>
        </div>
        <p class="text-base text-gray-600 mt-2">Connecting residents to vital community resources.</p>
    </header>

    <div id="app-root" class="w-full max-w-4xl min-h-[calc(100vh-200px)] flex flex-col justify-center">
        </div>

    <footer class="w-full max-w-4xl mt-10 pt-6 border-t border-gray-300 text-center text-gray-600 text-sm">
        <p>&copy; 2025 Commonwealth of Virginia. All Rights Reserved.</p>
        <p class="mt-1">For official inquiries, contact <a href="mailto:info@virginia.gov" class="text-blue-600 hover:underline">info@virginia.gov</a>.</p>
        <p class="mt-1">Disclaimer: Information provided for public guidance. Users should verify details with service providers.</p>
    </footer>

    <script>
        // Data for the buttons and their corresponding page content
        const originalButtonData = [
            { id: 'btn1', title: 'Norfolk', description: 'The vibrant urban core of Hampton Roads, home to Naval Station Norfolk and a thriving arts scene.' },
            { id: 'btn2', title: 'Virginia Beach', description: 'Known for its extensive beaches, resort strip, and diverse coastal attractions.' },
            { id: 'btn3', title: 'Chesapeake', description: 'A large city characterized by its blend of urban, suburban, and rural areas, including parts of the Great Dismal Swamp.' },
            { id: 'btn4', title: 'Newport News', description: 'A city rich in maritime history and shipbuilding, featuring the Newport News Shipbuilding yard.' },
            { id: 'btn5', title: 'Hampton', description: 'A historic city with deep roots in American history, including Fort Monroe and NASA Langley Research Center.' },
            { id: 'btn6', title: 'Suffolk', description: 'Virginia\'s largest city by land area, known for its agricultural heritage and the famous Planters Peanuts.' },
            { id: 'btn7', title: 'Portsmouth', description: 'A historic waterfront city across from Norfolk, home to the Norfolk Naval Shipyard and a charming old town.' },
        ];

        let currentButtonData = [...originalButtonData];
        let currentPage = 'main';
        let isSorted = false;

        const chesapeakeData = {
            'Housing Assistance': [
                {
                    name: 'Chesapeake Housing & Redevelopment Authority',
                    website: 'https://www.chesapeakehr.org/',
                    services: 'Provides affordable housing, rental assistance programs, and housing counseling.',
                    generalType: 'Government Agency',
                    populationType: 'Low-income individuals and families',
                    email: 'info@chesapeakehr.org',
                    phone: '(757) 123-4567',
                    address: '123 Housing Way, Chesapeake, VA 23320',
                    socialMedia: {
                        facebook: 'https://facebook.com/chesapeakehra',
                        twitter: 'https://twitter.com/chesapeakehra'
                    },
                    pointsOfContact: [
                        {
                            firstName: 'Jane',
                            lastName: 'Doe',
                            position: 'Housing Counselor',
                            email: 'jane.doe@chesapeakehr.org',
                            phone: '(757) 111-2222'
                        }
                    ]
                },
                {
                    name: 'Habitat for Humanity South Hampton Roads',
                    website: 'https://www.shrhabitat.org/',
                    services: 'Builds and renovates homes for low-income families, offering affordable homeownership opportunities.',
                    generalType: 'Non-profit Organization',
                    populationType: 'Low-income families',
                    email: 'info@shrhabitat.org',
                    phone: '(757) 987-6543',
                    address: '456 Building Blvd, Chesapeake, VA 23321',
                    socialMedia: {
                        facebook: 'https://facebook.com/HabitatSHR'
                    },
                    pointsOfContact: [
                        {
                            firstName: 'John',
                            lastName: 'Smith',
                            position: 'Volunteer Coordinator',
                            email: 'john.smith@shrhabitat.org',
                            phone: '(757) 333-4444'
                        }
                    ]
                }
            ],
            'Mental Health': [
                {
                    name: 'Chesapeake Integrated Behavioral Healthcare (CIBH)',
                    website: 'https://www.cityofchesapeake.net/government/city-departments/human-services/behavioral-healthcare.htm',
                    services: 'Comprehensive mental health, substance abuse, and intellectual disability services.',
                    generalType: 'Government Department',
                    populationType: 'All Chesapeake residents',
                    email: 'cibh@cityofchesapeake.net',
                    phone: '(757) 547-9334',
                    address: '224 Great Bridge Blvd, Chesapeake, VA 23320',
                    socialMedia: {},
                    pointsOfContact: []
                },
                {
                    name: 'Family & Youth Foundations of Virginia',
                    website: 'https://www.fyfov.org/',
                    services: 'Provides outpatient mental health services, intensive in-home services, and therapeutic foster care for children, adolescents, and adults.',
                    generalType: 'Private/Non-profit Organization',
                    populationType: 'Children, adolescents, adults, families',
                    email: 'info@fyfov.org',
                    phone: '(757) 420-5693',
                    address: '500 Viking Dr Suite 210, Virginia Beach, VA 23452 (serves Chesapeake)',
                    socialMedia: {
                        facebook: 'https://facebook.com/FamilyYouthFoundations'
                    },
                    pointsOfContact: [
                        {
                            firstName: 'Sarah',
                            lastName: 'Jones',
                            position: 'Clinical Director',
                            email: 'sarah.jones@fyfov.org',
                            phone: '(757) 420-5693'
                        }
                    ]
                },
                {
                    name: 'Dominion Diagnostics',
                    website: 'https://www.domdx.com/',
                    services: 'Offers comprehensive drug testing and lab services for behavioral health, pain management, and addiction treatment.',
                    generalType: 'Private Company',
                    populationType: 'Healthcare providers, patients',
                    email: 'info@domdx.com',
                    phone: '(866) 450-4828',
                    address: '2118 Dabney Dr, Richmond, VA 23230 (main office, offers services regionally)',
                    socialMedia: {
                        linkedin: 'https://www.linkedin.com/company/dominion-diagnostics/'
                    },
                    pointsOfContact: []
                }
            ],
            'Chesapeake Health Department': [
                {
                    name: 'Chesapeake Health Department',
                    website: 'https://www.vdh.virginia.gov/chesapeake/',
                    services: 'Public health services including immunizations, family planning, WIC, environmental health, and disease prevention.',
                    generalType: 'Government Agency',
                    populationType: 'All Chesapeake residents',
                    email: 'chesapeakehd@vdh.virginia.gov',
                    phone: '(757) 382-8600',
                    address: '748 Battlefield Blvd N, Chesapeake, VA 23320',
                    socialMedia: {},
                    pointsOfContact: []
                }
            ],
            'Behavioral Health': [
                {
                    name: 'Recovery Innovations of Virginia',
                    website: 'http://www.recoveryinnovationsva.org/',
                    services: 'Peer support services, recovery education, and advocacy for individuals with mental health and substance use challenges.',
                    generalType: 'Non-profit Organization',
                    populationType: 'Individuals in recovery from mental health and substance use disorders',
                    email: 'info@recoveryinnovationsva.org',
                    phone: '(757) 555-1234',
                    address: '789 Recovery St, Chesapeake, VA 23322',
                    socialMedia: {
                        facebook: 'https://facebook.com/RecoveryInnovationsVA'
                    },
                    pointsOfContact: []
                }
            ],
            'Food Assistance': [
                {
                    name: 'Chesapeake Public Schools Food Services',
                    website: 'https://www.cps.k12.va.us/departments/food-services',
                    services: 'Provides breakfast and lunch programs for students, including free and reduced-price meals.',
                    generalType: 'Government (School System)',
                    populationType: 'Students enrolled in Chesapeake Public Schools',
                    email: 'foodservices@cps.k12.va.us',
                    phone: '(757) 547-0153',
                    address: '312 Student Way, Chesapeake, VA 23320',
                    socialMedia: {}
                },
                {
                    name: 'Foodbank of Southeastern Virginia and the Eastern Shore',
                    website: 'https://foodbankonline.org/',
                    services: 'Distributes food to partner agencies (food pantries, soup kitchens) across the region, including Chesapeake.',
                    generalType: 'Non-profit Organization',
                    populationType: 'Food-insecure individuals and families',
                    email: 'info@foodbankonline.org',
                    phone: '(757) 627-6599',
                    address: '800 Tidewater Dr, Norfolk, VA 23504 (main office, serves Chesapeake)',
                    socialMedia: {
                        facebook: 'https://facebook.com/FoodbankSEVA',
                        instagram: 'https://instagram.com/foodbankseva'
                    },
                    pointsOfContact: []
                }
            ],
            'City of Chesapeake': [
                {
                    name: 'City of Chesapeake Official Website',
                    website: 'https://www.cityofchesapeake.net/',
                    services: 'Information on all city services, departments, news, and events. Acts as a central hub for city information.',
                    generalType: 'Government',
                    populationType: 'All Chesapeake residents',
                    email: 'publicinfo@cityofchesapeake.net',
                    phone: '(757) 382-CITY (2489)',
                    address: '306 Cedar Rd, Chesapeake, VA 23322',
                    socialMedia: {
                        facebook: 'https://facebook.com/CityofChesapeakeVA',
                        twitter: 'https://twitter.com/ChesapeakeCity'
                    },
                    pointsOfContact: []
                }
            ],
            'Nonfood Donations': [
                {
                    name: 'Goodwill of Central and Coastal Virginia',
                    website: 'https://goodwillvirginia.org/',
                    services: 'Accepts donations of clothing, household items, furniture, and electronics. Uses proceeds for workforce development programs.',
                    generalType: 'Non-profit Organization (Retail/Donation)',
                    populationType: 'General public (donors) and individuals seeking employment (program beneficiaries)',
                    email: 'info@goodwillvirginia.org',
                    phone: '(804) 745-6300 (main office)',
                    address: 'Various donation centers and stores in Chesapeake (check website for locations)',
                    socialMedia: {
                        facebook: 'https://facebook.com/GoodwillVA'
                    },
                    pointsOfContact: []
                },
                {
                    name: 'Salvation Army Family Store & Donation Center',
                    website: 'https://salvationarmycarolinas.org/hampton-roads/locations/',
                    services: 'Accepts donations of clothing, furniture, and household goods to support their rehabilitation programs.',
                    generalType: 'Religious/Charitable Organization',
                    populationType: 'General public (donors) and individuals in need of rehabilitation/support',
                    email: 'info@salvationarmy.org',
                    phone: '(757) 549-3661 (Chesapeake Store)',
                    address: '4225 Portsmouth Blvd, Chesapeake, VA 23321',
                    socialMedia: {
                        facebook: 'https://facebook.com/SalvationArmyUSA'
                    },
                    pointsOfContact: []
                }
            ],
            'Health Facility': [
                {
                    name: 'Chesapeake Regional Medical Center',
                    website: 'https://chesapeakeregional.com/',
                    services: 'Full-service hospital providing emergency care, surgical services, maternity, cancer treatment, and more.',
                    generalType: 'Hospital/Healthcare System',
                    populationType: 'General public',
                    email: 'info@chesapeakeregional.com',
                    phone: '(757) 312-8121',
                    address: '736 Battlefield Blvd N, Chesapeake, VA 23320',
                    socialMedia: {
                        facebook: 'https://facebook.com/ChesapeakeRegionalMedicalCenter'
                    },
                    pointsOfContact: []
                },
                {
                    name: 'Sentara Greenbrier Healthplex',
                    website: 'https://www.sentara.com/hospitalslocations/locations/sentara-greenbrier-healthplex.aspx',
                    services: 'Urgent care, imaging services, physical therapy, and various physician offices.',
                    generalType: 'Healthcare Facility',
                    populationType: 'General public',
                    email: 'contact@sentara.com',
                    phone: '(757) 388-3000',
                    address: '1209 Greenbrier Pkwy, Chesapeake, VA 23320',
                    socialMedia: {
                        facebook: 'https://facebook.com/SentaraHealthcare'
                    },
                    pointsOfContact: []
                }
            ],
            'Financial Assistance': [
                {
                    name: 'Virginia Department of Social Services (DSS) - Chesapeake',
                    website: 'https://www.dss.virginia.gov/localagency/chesapeake.cgi',
                    services: 'Administers programs like TANF (Temporary Assistance for Needy Families), SNAP (Food Stamps), Medicaid, and energy assistance.',
                    generalType: 'Government Agency',
                    populationType: 'Eligible low-income individuals and families',
                    email: 'chesapeake.dss@dss.virginia.gov',
                    phone: '(757) 382-2000',
                    address: '100 Out Of Poverty Lane, Chesapeake, VA 23320',
                    socialMedia: {},
                    pointsOfContact: []
                }
            ],
            'Youth Development': [
                {
                    name: 'Boys & Girls Clubs of Southeast Virginia',
                    website: 'https://bgcseva.org/',
                    services: 'After-school programs, summer camps, and youth development activities focused on education, health, and character.',
                    generalType: 'Non-profit Organization',
                    populationType: 'Youth ages 6-18',
                    email: 'info@bgcseva.org',
                    phone: '(757) 461-5437',
                    address: 'Various club locations in Chesapeake (check website for specifics)',
                    socialMedia: {
                        facebook: 'https://facebook.com/BGCSouthEastVA',
                        instagram: 'https://instagram.com/bgcseva'
                    },
                    pointsOfContact: []
                },
                {
                    name: 'Chesapeake Public Library - Youth Services',
                    website: 'https://www.infopeake.org/youth',
                    services: 'Story times, educational programs, summer reading challenges, and resources for children and teens.',
                    generalType: 'Government (Library System)',
                    populationType: 'Children and teenagers',
                    email: 'library@infopeake.org',
                    phone: '(757) 410-7100 (main)',
                    address: 'Various branch locations in Chesapeake',
                    socialMedia: {
                        facebook: 'https://facebook.com/ChesapeakePublicLibrary'
                    },
                    pointsOfContact: []
                }
            ],
            'Disaster Relief': [
                {
                    name: 'American Red Cross Coastal Virginia Chapter',
                    website: 'https://www.redcross.org/local/virginia/coastal-virginia.html',
                    services: 'Provides disaster relief services including shelter, food, health services, and emotional support after emergencies.',
                    generalType: 'Non-profit Organization',
                    populationType: 'Individuals and families affected by disasters',
                    email: 'info.coastalva@redcross.org',
                    phone: '(757) 446-7700',
                    address: '6090 Newport Cres, Norfolk, VA 23505 (serves Chesapeake)',
                    socialMedia: {
                        facebook: 'https://facebook.com/RedCrossCoastalVA'
                    },
                    pointsOfContact: []
                }
            ],
            'Environmental Health': [
                {
                    name: 'Chesapeake Health Department - Environmental Health Division',
                    website: 'https://www.vdh.virginia.gov/chesapeake/environmental-health/',
                    services: 'Ensures public health through food safety inspections, septic system permits, well water testing, and rabies control.',
                    generalType: 'Government Agency',
                    populationType: 'All Chesapeake residents',
                    email: 'chesapeakehd@vdh.virginia.gov',
                    phone: '(757) 382-8600',
                    address: '748 Battlefield Blvd N, Chesapeake, VA 23320',
                    socialMedia: {},
                    pointsOfContact: []
                },
                {
                    name: 'Elizabeth River Project',
                    website: 'https://elizabethriver.org/',
                    services: 'Works to restore and protect the Elizabeth River through education, conservation, and advocacy.',
                    generalType: 'Non-profit Organization',
                    populationType: 'General public, local communities, environmental enthusiasts',
                    email: 'info@elizabethriver.org',
                    phone: '(757) 399-7487',
                    address: '475 Water St, Portsmouth, VA 23704 (serves Chesapeake)',
                    socialMedia: {
                        facebook: 'https://facebook.com/ElizabethRiverProject'
                    },
                    pointsOfContact: []
                }
            ]
        };

        /**
         * Renders a single organization's details as a list.
         * @param {Object} org - The organization object.
         * @returns {string} - HTML string for the organization details.
         */
        function renderOrganizationDetails(org) {
            let html = `
                <div class="bg-white p-5 rounded-md shadow-sm mb-4 border border-gray-200 text-gray-700">
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">${org.name}</h4> ${org.website ? `<p class="text-sm mb-2"><strong>Website:</strong> <a href="${org.website}" target="_blank" class="text-blue-600 hover:underline">${org.website}</a></p>` : ''}
                    <p class="mb-2"><strong>Services:</strong> ${org.services}</p>
                    <p class="mb-2"><strong>General Type:</strong> ${org.generalType}</p>
                    <p class="mb-2"><strong>Population Served:</strong> ${org.populationType}</p>
                    ${org.email ? `<p class="mb-2"><strong>Email:</strong> <a href="mailto:${org.email}" class="text-blue-600 hover:underline">${org.email}</a></p>` : ''}
                    ${org.phone ? `<p class="mb-2"><strong>Phone:</strong> <a href="tel:${org.phone}" class="text-blue-600 hover:underline">${org.phone}</a></p>` : ''}
                    ${org.address ? `<p class="mb-4"><strong>Address:</strong> ${org.address}</p>` : ''}
            `;

            // Social Media Links
            const socialMediaLinks = Object.keys(org.socialMedia).map(platform => {
                const url = org.socialMedia[platform];
                const icon = {
                    facebook: 'fab fa-facebook',
                    twitter: 'fab fa-twitter',
                    instagram: 'fab fa-instagram',
                    linkedin: 'fab fa-linkedin'
                }[platform] || 'fas fa-globe';

                return `<a href="${url}" target="_blank" class="text-gray-600 hover:text-blue-700 mr-3"><i class="${icon}"></i> ${platform.charAt(0).toUpperCase() + platform.slice(1)}</a>`; /* PROFESSIONAL REFORMAT: Changed to neutral gray, hover to blue */
            }).join('');

            if (socialMediaLinks) {
                html += `<p class="mb-4"><strong>Social Media:</strong> ${socialMediaLinks}</p>`;
            }

            // Points of Contact
            if (org.pointsOfContact && org.pointsOfContact.length > 0) {
                html += `<h5 class="text-lg font-semibold text-gray-700 mb-2">Points of Contact:</h5>`; /* PROFESSIONAL REFORMAT: Changed to neutral gray */
                org.pointsOfContact.forEach(poc => {
                    html += `
                        <div class="ml-4 mb-2 p-3 bg-gray-100 rounded-sm border border-gray-200"> <p class="text-gray-700"><strong>Name:</strong> ${poc.firstName} ${poc.lastName}</p>
                            <p class="text-gray-700"><strong>Position:</strong> ${poc.position}</p>
                            ${poc.email ? `<p class="text-gray-700"><strong>Email:</strong> <a href="mailto:${poc.email}" class="text-blue-600 hover:underline">${poc.email}</a></p>` : ''}
                            ${poc.phone ? `<p class="text-gray-700"><strong>Phone:</strong> <a href="tel:${poc.phone}" class="text-blue-600 hover:underline">${poc.phone}</a></p>` : ''}
                        </div>
                    `;
                });
            }

            html += `</div>`;
            return html;
        }

        /**
         * Renders the entire application UI based on the current state.
         * This function acts as the central rendering mechanism for the single-page application.
         */
        function render() {
            const appContainer = document.getElementById('app-root');
            appContainer.innerHTML = ''; // Clear existing content

            // Check if the current page is the main page.
            if (currentPage === 'main') {
                // Create the main content div with professional styling.
                const mainContentDiv = document.createElement('div');
                // PROFESSIONAL REFORMAT: Clean, elevated appearance with borders
                mainContentDiv.className = 'bg-white p-8 rounded-lg shadow-xl w-full text-center border border-gray-200';

                // Create and append the main title.
                const title = document.createElement('h2'); // Changed to h2 for semantic hierarchy after header h1
                // PROFESSIONAL REFORMAT: Strong, clear, neutral title without gradients
                title.className = 'text-4xl font-extrabold mb-6 text-gray-800';
                title.textContent = 'Explore Hampton Roads Regions';
                mainContentDiv.appendChild(title);

                // Create and append the descriptive paragraph.
                const description = document.createElement('p');
                // PROFESSIONAL REFORMAT: Darker, more readable text
                description.className = 'text-lg text-gray-700 mb-10 max-w-2xl mx-auto leading-relaxed';
                description.textContent = 'Select a region below to discover essential local services and information. Use the sorting option to organize your search results.';
                mainContentDiv.appendChild(description);

                // Create the filter button.
                const filterButton = document.createElement('button');
                // PROFESSIONAL REFORMAT: Solid, official gray button style
                filterButton.className = 'mb-10 px-8 py-3 bg-gray-700 text-white font-semibold rounded-md shadow-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 transition-colors duration-200 ease-in-out';
                filterButton.textContent = isSorted ? 'Turn Off Alphabetical Sort' : 'Sort Regions Alphabetically';
                // Add event listener to toggle sorting and re-render.
                filterButton.onclick = () => {
                    isSorted = !isSorted;
                    if (isSorted) {
                        currentButtonData.sort((a, b) => a.title.localeCompare(b.title));
                    } else {
                        currentButtonData = [...originalButtonData];
                    }
                    render();
                };
                mainContentDiv.appendChild(filterButton);

                // Create a grid container for the buttons.
                const buttonsGrid = document.createElement('div');
                buttonsGrid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';

                // Iterate over the current button data and create a button for each.
                currentButtonData.forEach(button => {
                    const btnElement = document.createElement('button');
                    // PROFESSIONAL REFORMAT: Clean, light buttons with subtle gray accents and shadows
                    btnElement.className = 'p-6 bg-gray-50 border border-gray-200 rounded-lg shadow-sm hover:bg-gray-100 hover:border-gray-400 transition-all duration-200 ease-in-out text-lg font-semibold text-gray-800 text-left flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50';
                    btnElement.onclick = () => {
                        currentPage = button.id;
                        render();
                    };

                    // PROFESSIONAL REFORMAT: Display button title clearly
                    const buttonTextSpan = document.createElement('span');
                    buttonTextSpan.textContent = button.title;
                    btnElement.appendChild(buttonTextSpan);

                    // PROFESSIONAL REFORMAT: Simple, solid gray arrow icon
                    const arrowIcon = document.createElement('span');
                    arrowIcon.className = 'ml-3 text-gray-600'; /* Changed from blue-600 to gray-600 */
                    arrowIcon.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                        </svg>
                    `;
                    btnElement.appendChild(arrowIcon);

                    buttonsGrid.appendChild(btnElement);
                });

                // Append all elements to the main content div.
                mainContentDiv.appendChild(buttonsGrid);
                appContainer.appendChild(mainContentDiv);

            } else { // Detail page logic
                const selectedButton = originalButtonData.find(button => button.id === currentPage);

                const detailContentDiv = document.createElement('div');
                // PROFESSIONAL REFORMAT: Clean, elevated appearance with borders for detail pages
                detailContentDiv.className = 'bg-white p-8 rounded-lg shadow-xl w-full text-left border border-gray-200';

                // Create and append the title of the detail page.
                const title = document.createElement('h2'); // Changed to h2
                // PROFESSIONAL REFORMAT: Consistent neutral heading for detail pages
                title.className = 'text-3xl font-extrabold mb-6 text-gray-800 text-center';
                title.textContent = selectedButton ? `${selectedButton.title} Services & Information` : 'Page Not Found';
                detailContentDiv.appendChild(title);

                // Create the "Back to Main Page" button.
                const backButton = document.createElement('button');
                // PROFESSIONAL REFORMAT: Muted, clear back button
                backButton.className = 'px-5 py-2 bg-gray-200 text-gray-700 font-semibold rounded-md shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-50 transition-colors duration-200 mb-8 inline-flex items-center';
                backButton.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to Regions
                `; // Added back arrow icon
                backButton.onclick = () => {
                    currentPage = 'main';
                    render();
                };
                detailContentDiv.appendChild(backButton);

                // Logic for Chesapeake's special content (dropdowns)
                if (currentPage === 'btn3' && selectedButton.title === 'Chesapeake') {
                    const dropdownContainer = document.createElement('div');
                    dropdownContainer.className = 'mt-6';

                    for (const category in chesapeakeData) {
                        if (chesapeakeData.hasOwnProperty(category)) {
                            const organizations = chesapeakeData[category];

                            const accordionItem = document.createElement('div');
                            // PROFESSIONAL REFORMAT: Clean, structured accordion items
                            accordionItem.className = 'mb-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200';

                            const accordionHeader = document.createElement('button');
                            // PROFESSIONAL REFORMAT: Clear, distinct header for each dropdown, neutral color
                            accordionHeader.className = 'flex justify-between items-center w-full p-4 text-lg font-semibold text-gray-800 bg-gray-100 hover:bg-gray-200 focus:outline-none rounded-t-lg transition-colors duration-200 ease-in-out';
                            accordionHeader.innerHTML = `
                                <span>${category}</span>
                                <svg class="w-5 h-5 text-gray-600 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                            `;
                            accordionItem.appendChild(accordionHeader);

                            const accordionContent = document.createElement('div');
                            accordionContent.className = 'accordion-content px-4 pb-4';
                            accordionItem.appendChild(accordionContent);

                            if (organizations.length > 0) {
                                organizations.forEach(org => {
                                    accordionContent.innerHTML += renderOrganizationDetails(org);
                                });
                            } else {
                                accordionContent.innerHTML = `<p class="text-gray-600 p-4 italic">No organizations listed under "${category}" at this time. Please check back later.</p>`;
                            }

                            accordionHeader.onclick = () => {
                                accordionContent.classList.toggle('active');
                                const svgIcon = accordionHeader.querySelector('svg');
                                svgIcon.classList.toggle('rotate-180');
                            };

                            dropdownContainer.appendChild(accordionItem);
                        }
                    }
                    detailContentDiv.appendChild(dropdownContainer);

                } else {
                    const description = document.createElement('p');
                    description.className = 'text-lg text-gray-700 mb-10 max-w-2xl mx-auto leading-relaxed text-center';
                    description.textContent = selectedButton ? selectedButton.description : 'The content you are looking for does not exist.';
                    detailContentDiv.appendChild(description);
                }

                appContainer.appendChild(detailContentDiv);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const fontAwesomeScript = document.createElement('script');
            fontAwesomeScript.src = 'https://kit.fontawesome.com/your-font-awesome-kit-code.js'; // IMPORTANT: REPLACE WITH YOUR ACTUAL FONT AWESOME KIT CODE
            fontAwesomeScript.crossOrigin = 'anonymous';
            document.head.appendChild(fontAwesomeScript);

            // Ensure currentPage is explicitly set to 'main' at load time
            currentPage = 'main';
            render();
        });
    </script>
</body>
</html>
